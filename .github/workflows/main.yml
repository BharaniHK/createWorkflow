name: Check For Changes to Monitored Files

on:
  pull_request:
    branches: 
       - main
       - development

  push:
    branches: 
       - main
       - development
      
jobs:
  check_changes_and_alert:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      with:
        fetch-depth: ${{ github.event_name == 'pull_request' && 2 || 0 }}

    - name: Check and Alert if watched files changed
      id: check-and-alert
      run: |
        # Define the list of filenames to watch for changes
        if [[ ${{ github.event_name }} == 'pull_request' ]]; then
          echo Hello
        else
          changed_files=$(git diff --name-only ${{ github.event.before }} ${{ github.event.after }})
          for i in $changed_files; do
            echo files changed $i
            if [[ "$i" = *".jsx" || "$i" = *".html"  ]] ; then
             echo "$i is .jsx file"
             grep -F '^name$' $i
             git log -p -n 1 -- $i
            else
             echo "$i is NOT .jsx or .html file"
             #git log -p -n 1 -- $i
            fi
          done 
        fi
        
